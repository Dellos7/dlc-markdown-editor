import{e as i,j as t,h as e,i as s,f as a,g as n}from"./p-2b8e2d69.js";import{a as o,b as r}from"./p-b3ecd786.js";import{f as h}from"./p-8e93f952.js";class l{constructor(s){i(this,s),this.animated=!0,this.ionNavWillLoad=t(this,"ionNavWillLoad",7),this.ionNavWillChange=t(this,"ionNavWillChange",3),this.ionNavDidChange=t(this,"ionNavDidChange",3),this.config=e(this,"config"),this.win=e(this,"window"),this.queue=e(this,"queue")}swipeHandlerChanged(){this.gesture&&this.gesture.setDisabled(void 0===this.swipeHandler)}componentWillLoad(){this.ionNavWillLoad.emit()}async componentDidLoad(){this.gesture=(await __sc_import_dlc_markdown_editor("./p-f9104233.js")).createSwipeBackGesture(this.el,()=>!!this.swipeHandler&&this.swipeHandler.canStart(),()=>this.swipeHandler&&this.swipeHandler.onStart(),i=>this.ani&&this.ani.progressStep(i),(i,t,e)=>{this.ani&&this.ani.progressEnd(i,t,e),this.swipeHandler&&this.swipeHandler.onEnd(i)}),this.swipeHandlerChanged()}componentDidUnload(){this.activeEl=this.activeComponent=void 0,this.gesture&&(this.gesture.destroy(),this.gesture=void 0)}async commit(i,t,e){const s=await this.lock();let a=!1;try{a=await this.transition(i,t,e)}catch(i){console.error(i)}return s(),a}async setRouteId(i,t,e){return{changed:await this.setRoot(i,t,{duration:"root"===e?0:void 0,direction:"back"===e?"back":"forward"}),element:this.activeEl}}async getRouteId(){const i=this.activeEl;return i?{id:i.tagName,element:i}:void 0}async setRoot(i,t,e){if(this.activeComponent===i)return!1;const s=this.activeEl,a=await o(this.delegate,this.el,i,["ion-page","ion-page-invisible"],t);return this.activeComponent=i,this.activeEl=a,await this.commit(a,s,e),await r(this.delegate,s),!0}async transition(i,t,e={}){if(t===i)return!1;this.ionNavWillChange.emit();const a=s(this),{win:n,el:o}=this,r=this.animated&&this.config.getBoolean("animated",!0),l=this.animation||e.animationBuilder||this.config.get("navAnimation");return await h(Object.assign({mode:a,animated:r,animationBuilder:l,window:n,enteringEl:i,leavingEl:t,baseEl:o,progressCallback:e.progressAnimation?i=>this.ani=i:void 0},e)),this.ionNavDidChange.emit(),!0}async lock(){const i=this.waitPromise;let t;return this.waitPromise=new Promise(i=>t=i),void 0!==i&&await i,t}render(){return a("slot",null)}get el(){return n(this)}static get watchers(){return{swipeHandler:["swipeHandlerChanged"]}}static get style(){return":host{left:0;right:0;top:0;bottom:0;position:absolute;contain:layout size style;overflow:hidden;z-index:0}"}}export{l as ion_router_outlet};